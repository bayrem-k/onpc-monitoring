# This file was generated by Ansible for {{ansible_fqdn}}
# Do NOT modify this file by hand!
{%- if inventory_hostname in groups['nova_compute'] and
    (nova_virt_type | default('qemu') in ['kvm', 'qemu']) %}
# Python plugin to collect OpenStack Compute stats

<Plugin "python">
  ModulePath "{{ collectd_plugins_dir }}/collectd-modules"
  LogTraces false
  Interactive false

  Import "openstack_compute"

  <Module "openstack_compute">
    CpuAllocationRatio "8.0"
    DependsOnResource "internal_lb_vip_address"
    KeystoneUrl "{{ keystone_service_internaluri }}/v2.0"
    Password "{{ monitoring_user_password }}"
    Tenant "{{ monitoring_tenant_name }}"
    Timeout "5"
    Username "{{ monitoring_user_name }}"
  </Module>
</Plugin>
<%- endif %>